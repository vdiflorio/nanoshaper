# Cmake config for DelphiSurface module
project(DelphiSurface) 
cmake_minimum_required(VERSION 3.1)
cmake_policy(VERSION 2.8.4)

if (NOT TBB_DISABLED)
	find_package(TBB REQUIRED)
endif()

include_directories (BEFORE include)
include_directories(src)
include_directories(src/ConfigFile)
include_directories(src/jama)
include_directories(src/tnt)
include_directories(src/sturm)
include_directories(src/octree)

# if cgal is found, boost is automatically found
find_package(CGAL)
 
file(GLOB SRC
	"./src/*.h"
	"./src/*.cpp")

if (CGAL_FOUND)

	include( ${CGAL_USE_FILE} )		
	add_definitions(-DENABLE_CGAL)

	if(NOT BOOST_DISABLED)
		add_definitions(-DENABLE_BOOST_THREADS)
		message(STATUS "NanoShaper BOOST enabled")
	else()
		message(STATUS "NanoShaper BOOST not enabled (only used in cgal)")
	endif()
	
	#######################
	### delphi bind mode ##
	#######################
	add_definitions(-DDELPHI_BIND)
	#delphi module  
	add_library(DelphiSurface SHARED
							./src/sturm/sturm.cpp
							./src/sturm/util.cpp
							./src/sturm/solve.h
							${SRC}
							./src/ply/ply.cpp
							./src/ply/ply.h								

							./src/ConfigFile/ConfigFile.cpp
							./src/ConfigFile/ConfigFile.h 
							./src/octree/octree.h 
							)    
			
 endif(CGAL_FOUND)
